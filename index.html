<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Trimmer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cropperjs@1.5.5/dist/cropper.min.css">
    <style>
      body, code {
        font-family: menlo, monospace;
        font-size: 16px;
      }
      #app {
        margin: 0 auto;
        padding: 16px;
        max-width: 960px;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <div>
        <input
          type="file"
          @change="onChange"
        >
      </div>
      <vue-grid>
        <vue-cell width="12of12">
          <vue-trim
            style="max-width: 100%;"
            ref="trim"
            tag="canvas"
            :file="file"
            @crop="onCrop"
          />
        </vue-cell>
      </vue-grid>
      <div>
        <label>
          x: <input type="text" :value="x" readonly>
        </label>
      </div>
      <div>
        <label>
          y: <input type="text" :value="y" readonly>
        </label>
      </div>
      <div>
        <label>
          width: <input type="text" :value="width" readonly>
        </label>
      </div>
      <div>
        <label>
          height: <input type="text" :value="height" readonly>
        </label>
      </div>
      <div>
        <label>
          scaleX: <input type="text" :value="scaleX" readonly>
        </label>
      </div>
      <div>
        <label>
          scaleY: <input type="text" :value="scaleY" readonly>
        </label>
      </div>
      <div>
        <label>
          rotate: <input type="text" :value="rotate" readonly>
        </label>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue-grd@1.2.1/dist/vue-grd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue-trim@0.2.0/dist/vue-trim.js"></script>
    <script>
      Vue.use(VueGrd);
      Vue.use(VueTrim);

      const app = new Vue({
        el: '#app',
        data() {
          return {
            file: null,
            x: 0,
            y: 0,
            width: 0,
            height: 0,
            scaleX: 0,
            scaleY: 0,
            rotate: 0
          };
        },
        methods: {
          onChange(e) {
            if (e.target.files.length !== 1) {
              return;
            }

            this.file = e.target.files[0];
          },
          onCrop() {
            const data = this.$refs.trim.cropper.getData();

            this.x = data.x;
            this.y = data.y;
            this.width = data.width;
            this.height = data.height;
            this.scaleX = data.scaleX;
            this.scaleY = data.scaleY;
            this.rotate = data.rotate;
          }
        }
      });
    </script>
  </body>
</html>
